
### 什么是插件化

将一个模块单独打成apk，放在服务器上，需要进入此模块的时候再下载下来动态加载进来，然后进去此模块，这就是插件化

### 插件化作用

- 早期是为了解决dex 65535问题。后来谷歌也出了multidex来专门解决
- 懒加载可以减少软件启动时间（可能，如果那个模块初始化需要时间的话）
- 减小安装包体积
- 项目结构拆分，依赖完全隔离，方便多团队开发和测试，解决组件化耦合度太高的问题。（也不一定，使用模块化就能解决这个问题）
- 动态部署
- bug热修复（插件是放服务器上的，可以随时更换）

### 插件化基础：反射

在说插件化之前先得说说反射，没有反射的话，插件化寸步难行。

有一个问题，Java已经提供了`public`、`private`等可见性关键字来限制代码之间的可见性，为什么还需要提供反射这种东西？

- 可见性是为了程序开发的简洁性，不容易写出bug，不是为了代码不被坏人使用
- 反射的支持可以让开发者在可见性的例外场景中，突破可见性限制来调用自己需要的API，这是建立在开发者已经足够了解的情况下
- 可见性的支持不是为了防止外来入侵，因此反射功能的支持是合理的

### dex

- class： Java编译后的文件，每个类对应一个class文件（内部类啥的也会有一个class文件）
- dex：Dalvik Executable把class打包在一起，一个dex可以包含多个class文件
- odex：Optimized dex针对系统的优化。（例如某个方法的调用指令，会把虚拟的调用转换为使用具体的index，这样在执行的时候就不用再查找了）
- oat：Optimized Android file Type。使用AOT策略对dex预先编译（解释）成本地指令，这样在运行阶段就不需要再经历一次解释过程了，程序运行更快

### 前置知识：ClassLoader

DexPathList

### 插件化原理：动态加载


